{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///./src/terminal/core/caret.component.ts","webpack:///./src/terminal/core/color.ts","webpack:///./src/terminal/core/file-system.service.ts","webpack:///./src/terminal/core/frame-content.directive.ts","webpack:///./src/terminal/core/frame.component.ts","webpack:///./src/terminal/core/glitch.component.ts","webpack:///./src/terminal/core/input.component.ts","webpack:///./src/terminal/core/line-break.component.ts","webpack:///./src/terminal/core/login.service.ts","webpack:///./src/terminal/core/session.component.ts","webpack:///./src/terminal/core/terminal.component.ts","webpack:///./src/terminal/core/text.component.ts","webpack:///./src/terminal/core/util.ts","webpack:///./src/terminal/programs/boot.program.ts","webpack:///./src/terminal/programs/change-directory.program.ts","webpack:///./src/terminal/programs/clear.program.ts","webpack:///./src/terminal/programs/count.program.ts","webpack:///./src/terminal/programs/help.program.ts","webpack:///./src/terminal/programs/hi.program.ts","webpack:///./src/terminal/programs/list-directory.program.ts","webpack:///./src/terminal/programs/login.program.ts","webpack:///./src/terminal/programs/make-directory.program.ts","webpack:///./src/terminal/programs/program.ts","webpack:///./src/terminal/programs/shell.program.ts","webpack:///./src/terminal/programs/tic-tac-toe/tic-tac-toe.engine.ts","webpack:///./src/terminal/programs/tic-tac-toe/tic-tac-toe.program.ts","webpack:///./src/terminal/terminal.module.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * In development mode, for easier debugging, you can ignore zone related error\n * stack frames such as `zone.run`/`zoneDelegate.invokeTask` by importing the\n * below file. Don't forget to comment it out in production mode\n * because it will have a performance impact when errors are thrown\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { environment } from './environments/environment';\nimport { TerminalModule } from './terminal/terminal.module';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(TerminalModule)\n  .catch(err => console.log(err));\n","import { Component } from '@angular/core';\n@Component({\n  selector: 'terminal-caret',\n  template: '<span class=\"caret\">█</span>',\n  styles: [\n    `           \n      @keyframes blinker {\n        from {opacity: 1.0;}\n        to {opacity: 0.0;}\n      }\n      .caret{\n        animation-name: blinker;\n        animation-duration: 0.6s;\n        animation-iteration-count: infinite;\n        animation-timing-function: cubic-bezier(1, 0, 0, 1);\n        animation-direction: alternate;\n      }\n    `\n  ]\n})\nexport class CaretComponent {\n}","export enum Color {\n    Text,\n    Black,\n    Red,\n    Green,\n    Yellow,\n    Blue,\n    Magenta,\n    Cyan,\n    White,\n    BrightText,\n    BrightBlack,\n    BrightRed,\n    BrightGreen,\n    BrightYellow,\n    BrightBlue,\n    BrightMagenta,\n    BrightCyan,\n    BrightWhite\n  }\n  \n  ","export class FileSystemEntry {\n    constructor(public name: string) { }\n}\n\nexport class File extends FileSystemEntry {\n    constructor(public parent: Directory, name: string) {\n        super(name);\n    }\n}\n\nexport class Directory extends FileSystemEntry {\n    children: (Directory | File)[] = [];\n\n    constructor(public parent: Directory, name) {\n        super(name);\n    }\n\n    toPath() {\n        let dir = this as Directory;\n        let path = '';\n        do {\n            path = dir.parent ? (path ? `${dir.name}/${path}` : dir.name) : `/${path}`;\n            dir = dir.parent;\n        } while (dir !== null);\n        return path;\n    }\n}\n\nexport class FileSystemService {\n    root = new Directory(null, '');\n    currentDirectory = this.root;\n\n     createDirectory(name: string, parent?: Directory) {\n        if (name == null)\n            throw 'invalid directory name';\n            \n        const currentDirectory = parent ? parent : this.currentDirectory;\n        const dir = new Directory(currentDirectory, name);\n        currentDirectory.children.push(dir);\n        return dir;\n    }\n\n    changeDirectory(path: string) {\n        const paths = path.split('/');\n\n        let dir = path[0] == '/' ? this.root : this.currentDirectory;\n\n        for (const item of paths) {\n            if (!item) {\n                continue;\n            }\n            else if (item == '..') {\n                dir = dir.parent ? dir.parent : dir;\n                continue;\n            }\n            else if (item == '.') {\n                continue;\n            }\n            else {\n                const match = dir.children.find(x => x.name === item);\n\n                if (match == null)\n                    throw 'path not found';\n\n                if (match instanceof Directory === false)\n                    throw `${path} is not a directory`\n\n                dir = match as Directory;\n            }\n        }\n\n        this.currentDirectory = dir;\n\n        return dir;\n    }\n\n}","import { ViewContainerRef, Directive } from \"@angular/core\";\n\n@Directive({\n    selector: '[terminal-frame-content]',\n})\nexport class FrameContentDirective {\n    constructor(public viewContainerRef: ViewContainerRef) { }\n}\n","import { LineBreakComponent } from './line-break.component';\nimport { TextComponent } from './text.component';\nimport { Component, ComponentFactoryResolver, Type, ComponentRef, ViewChild, EventEmitter, AfterViewInit } from '@angular/core';\nimport { InputComponent } from './input.component';\nimport { FrameContentDirective } from './frame-content.directive';\nimport { Color } from './color';\n\nimport * as $ from 'jquery';\n\nfunction forceScroll() {\n    $('html, body').scrollTop($(document).height() - $(window).height());\n}\n\n@Component({\n    selector: 'terminal-frame',\n    template: '<ng-template terminal-frame-content></ng-template>'\n})\nexport class FrameComponent implements AfterViewInit {\n    protected index = 0;\n    protected initialized = new EventEmitter();\n    protected forceScrolling = false;\n\n    @ViewChild(FrameContentDirective) content: FrameContentDirective;\n    parent: FrameComponent;\n\n    constructor(\n        private componentFactoryResolver: ComponentFactoryResolver) {\n    }\n\n    ngAfterViewInit() {\n        this.initialized.emit();\n        this.initialized.complete();\n    }\n\n    enableForceScrolling() {\n        this.forceScrolling = true;\n    }\n\n    append<T>(type: Type<T>, callback?: (c: ComponentRef<T>) => void) {\n        const compRef = this.createComponent(type, this.index++);\n        if (callback) callback(compRef);\n        if (this.forceScrolling) forceScroll();\n    }\n\n    write(text: string, color?: Color) {\n        this.append(TextComponent, ref => {\n            ref.instance.text = text;\n            ref.instance.color = color;\n        });\n    }\n\n    writeLine(text?: string, color?: Color) {\n        this.write(text ? text : '', color);\n        this.append(LineBreakComponent);\n    }\n\n    readLine(secret?: boolean): Promise<string> {\n        let promise;\n        this.append(InputComponent, ref => {\n            if (secret) ref.instance.secret = true;\n            promise = ref.instance.line.asObservable().toPromise()\n        });\n        return promise;\n    }\n\n    readKey(): Promise<string> {\n        let promise;\n        this.append(InputComponent, ref => {\n            ref.instance.mode = 'key';\n            promise = ref.instance.line.asObservable().toPromise()\n        });\n        return promise;\n    }\n\n    clear() {\n        this.content.viewContainerRef.clear();\n        this.index = 0;\n    }\n\n    async createFrame(): Promise<FrameComponent> {\n        await this.initialized.asObservable().toPromise();\n        let instance: FrameComponent;\n        this.append(FrameComponent, c => {\n            c.instance.parent = this;\n            instance = c.instance;\n        });\n        return instance;\n    }\n\n    protected createComponent<T>(type: Type<T>, index?: number) {\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(type);\n        return this.content.viewContainerRef.createComponent(componentFactory, index);\n    }\n}\n\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'terminal-banner',\n  template: '<div class=\"glitch\" [attr.data-text]=\"text\">{{text}}</div> ',\n  styles: [\n    `\n     \n    .glitch {\n      font-size: 3.5rem;\n      position: relative;\n    }\n\n    @keyframes noise-anim {\n      0% {\n        clip: rect(65px, 9999px, 87px, 0);\n      }\n      5% {\n        clip: rect(56px, 9999px, 86px, 0);\n      }\n      10% {\n        clip: rect(82px, 9999px, 89px, 0);\n      }\n      15% {\n        clip: rect(62px, 9999px, 45px, 0);\n      }\n      20% {\n        clip: rect(53px, 9999px, 23px, 0);\n      }\n      25% {\n        clip: rect(26px, 9999px, 79px, 0);\n      }\n      30% {\n        clip: rect(69px, 9999px, 53px, 0);\n      }\n      35% {\n        clip: rect(23px, 9999px, 34px, 0);\n      }\n      40% {\n        clip: rect(95px, 9999px, 41px, 0);\n      }\n      45% {\n        clip: rect(62px, 9999px, 90px, 0);\n      }\n      50% {\n        clip: rect(33px, 9999px, 53px, 0);\n      }\n      55% {\n        clip: rect(45px, 9999px, 32px, 0);\n      }\n      60% {\n        clip: rect(78px, 9999px, 20px, 0);\n      }\n      65% {\n        clip: rect(22px, 9999px, 26px, 0);\n      }\n      70% {\n        clip: rect(64px, 9999px, 40px, 0);\n      }\n      75% {\n        clip: rect(36px, 9999px, 92px, 0);\n      }\n      80% {\n        clip: rect(87px, 9999px, 22px, 0);\n      }\n      85% {\n        clip: rect(8px, 9999px, 47px, 0);\n      }\n      90% {\n        clip: rect(29px, 9999px, 90px, 0);\n      }\n      95% {\n        clip: rect(20px, 9999px, 68px, 0);\n      }\n      100% {\n        clip: rect(92px, 9999px, 73px, 0);\n      }\n    }\n    .glitch:after {\n      content: attr(data-text);\n      position: absolute;\n      left: 2px;\n      text-shadow: -1px 0 red;\n      top: 0;\n      color: white;\n      background: black;\n      overflow: hidden;\n      clip: rect(0, 900px, 0, 0);\n      animation: noise-anim 2s infinite linear alternate-reverse;\n    }\n\n    @keyframes noise-anim-2 {\n      0% {\n        clip: rect(16px, 9999px, 91px, 0);\n      }\n      5% {\n        clip: rect(48px, 9999px, 33px, 0);\n      }\n      10% {\n        clip: rect(59px, 9999px, 41px, 0);\n      }\n      15% {\n        clip: rect(19px, 9999px, 21px, 0);\n      }\n      20% {\n        clip: rect(91px, 9999px, 44px, 0);\n      }\n      25% {\n        clip: rect(49px, 9999px, 48px, 0);\n      }\n      30% {\n        clip: rect(11px, 9999px, 68px, 0);\n      }\n      35% {\n        clip: rect(86px, 9999px, 97px, 0);\n      }\n      40% {\n        clip: rect(18px, 9999px, 6px, 0);\n      }\n      45% {\n        clip: rect(98px, 9999px, 85px, 0);\n      }\n      50% {\n        clip: rect(12px, 9999px, 36px, 0);\n      }\n      55% {\n        clip: rect(5px, 9999px, 14px, 0);\n      }\n      60% {\n        clip: rect(75px, 9999px, 23px, 0);\n      }\n      65% {\n        clip: rect(52px, 9999px, 81px, 0);\n      }\n      70% {\n        clip: rect(79px, 9999px, 93px, 0);\n      }\n      75% {\n        clip: rect(49px, 9999px, 29px, 0);\n      }\n      80% {\n        clip: rect(71px, 9999px, 8px, 0);\n      }\n      85% {\n        clip: rect(40px, 9999px, 25px, 0);\n      }\n      90% {\n        clip: rect(82px, 9999px, 77px, 0);\n      }\n      95% {\n        clip: rect(37px, 9999px, 100px, 0);\n      }\n      100% {\n        clip: rect(65px, 9999px, 29px, 0);\n      }\n    }\n    .glitch:before {\n      content: attr(data-text);\n      position: absolute;\n      left: -2px;\n      text-shadow: 1px 0 blue;\n      top: 0;\n      color: white;\n      background: black;\n      overflow: hidden;\n      clip: rect(0, 900px, 0, 0);\n      animation: noise-anim-2 3s infinite linear alternate-reverse;\n    }\n \n    `\n  ]\n})\nexport class GlitchComponent {\n  text = '';\n}","import { Component, OnInit, ElementRef, AfterViewInit, ViewChild, Renderer2, Output } from '@angular/core';\nimport { EventEmitter } from '@angular/core';\n\nimport * as $ from 'jquery';\n\n@Component({\n  selector: 'terminal-input',\n  template: `\n    <input #focusTarget class=\"input\" [(ngModel)]=\"text\" autocorrect=\"off\" autocapitalize=\"none\">\n    <span [ngClass]=\"{'input--secret': secret}\">{{printableText}}</span>\n    `,\n  styles: [\n    ` .input {\n        position: absolute;\n        left: -9999px;       \n      }\n      .input--secret {\n        font-size: 2em;\n        line-height: 0;\n        vertical-align: middle;\n        letter-spacing: -0.15em;\n      }\n    `\n  ]\n})\nexport class InputComponent implements OnInit {\n  @ViewChild('focusTarget') private focusTarget;\n  private handlers: (() => void)[];\n\n  editable = true;\n  secret = false;\n  text = '';\n  mode: 'text' | 'key' = 'text';\n\n  @Output() line: EventEmitter<string> = new EventEmitter<string>();\n\n  constructor(private renderer: Renderer2, private elRef: ElementRef) {\n  }\n\n  ngOnInit() {\n    this.focus();\n\n    this.handlers = [\n      this.renderer.listen(document, 'touchend', (e) => { this.focus(e); }),\n      this.renderer.listen(document, 'click', (e) => this.focus(e)),\n      this.renderer.listen(this.focusTarget.nativeElement, 'keydown', e => this.checkInput(e))\n    ];\n  }\n\n  get printableText() {\n    if (!this.secret) return this.text;\n    return ''.padStart(this.text.length, '•');\n\n  }\n\n  private focus(e?) {\n    if (this.focusTarget.nativeElement) {\n      this.focusTarget.nativeElement.focus();\n    }\n  }\n\n  private checkInput(e) {\n    if (this.mode === 'key') {\n      this.complete(e, e.key);\n    } else if (e.key === 'Enter') {\n      this.complete(e, this.text);\n    }\n  }\n\n  private complete(e: any, text: string) {\n    e.preventDefault();\n    this.editable = false;\n    for (const destroyable of this.handlers) {\n      destroyable();\n    }\n    this.handlers = null;\n    this.renderer.removeChild(this.elRef.nativeElement, this.focusTarget.nativeElement);\n    this.focusTarget = null;\n    this.line.emit(text);\n    this.line.complete();\n  }\n}\n","import { Component } from '@angular/core';\n@Component({\n  selector: 'terminal-br',\n  template: '<br>'\n})\nexport class LineBreakComponent {\n}","import { Injectable } from '@angular/core';\nimport { Subject, ReplaySubject } from '../../../node_modules/rxjs';\n\nexport interface UserAccount {\n    username: string;\n    password: string;\n    admin: boolean;\n}\n\n@Injectable()\nexport class LoginService {\n    private users = [\n        { username: 'guest', password: '', admin: false },\n        { username: 'root', password: '123', admin: true }\n    ];\n\n    currentUser = new ReplaySubject<UserAccount>(1);\n\n    login(username, password) {\n        const account = this.users.find(x => x.username === username);\n\n        if (!account || account.password !== password) \n            throw 'invalid credentials. perhaps you should try login \\'root\\' and password \\'123\\'...';\n\n        this.currentUser.next(account);\n    }\n\n}","import { Component, Injector } from '@angular/core';\nimport { ActivatedRoute, Router, ParamMap, NavigationEnd, ActivationEnd } from '@angular/router';\nimport { BootProgram } from '../programs/boot.program';\nimport { LoginProgram } from '../programs/login.program';\nimport { ShellProgram } from '../programs/shell.program';\nimport { TerminalComponent } from './terminal.component';\nimport { first, filter } from 'rxjs/operators';\n\n@Component({\n    selector: 'terminal-session',\n    template: '<router-outlet (activate)=\"onActivate($event)\"></router-outlet>',\n})\nexport class SessionComponent {\n    terminal: TerminalComponent;\n    params: ParamMap;\n\n    constructor(private injector: Injector, router: Router) {\n        router.events.pipe(filter(x => x instanceof ActivationEnd), first()).subscribe(async (x: ActivationEnd) => {\n            this.params = x.snapshot.paramMap;\n\n            const boot = this.injector.get(BootProgram);\n            const login = this.injector.get(LoginProgram);\n            const shell = this.injector.get(ShellProgram);\n            if (this.params.keys.length) {\n                await login.run(await this.terminal.createFrame(), [this.params.get('user'), this.params.get('pwd')]);\n                await shell.run(await this.terminal.createFrame(), [this.params.get('program')]);\n            } else {\n                await boot.run(await this.terminal.createFrame(), []);\n                await login.run(await this.terminal.createFrame(), []);\n                await shell.run(await this.terminal.createFrame(), []);\n            }\n        });\n    }\n\n    onActivate(e) {\n        this.terminal = e as TerminalComponent;\n    }\n}","import { CaretComponent } from './caret.component';\nimport { Component, ComponentFactoryResolver, OnInit, AfterViewInit } from '@angular/core';\nimport { FrameComponent } from './frame.component';\n\n@Component({\n  selector: 'terminal-terminal',\n  template: '<ng-template terminal-frame-content></ng-template>'\n})\nexport class TerminalComponent extends FrameComponent implements AfterViewInit {\n\n  constructor(componentFactoryResolver: ComponentFactoryResolver) {\n    super(componentFactoryResolver);\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n    this.createComponent(CaretComponent);\n  }\n}\n\n","import { Component } from '@angular/core';\nimport { Color } from './color';\nimport { kebabCase } from 'lodash';\n\n@Component({\n  selector: 'terminal-text',\n  template: '<span [class]=\"getColor(color)\">{{text}}</span>',\n  styles: [\n    `\n    span { white-space: pre-wrap; }\n    `\n  ]\n})\nexport class TextComponent {\n  text = \"\";\n  color: Color;\n\n  getColor(color: Color) {\n    const style = kebabCase(Color[color ? color : Color.Text]);\n    return `color-${style}`;\n  }\n}","\n\nexport function sleeper(ms) {\n    return new Promise(resolve => setTimeout(() => resolve(0), ms));\n}","import { Injectable } from \"@angular/core\";\nimport { ProgramBase } from \"./program\";\nimport { FileSystemService } from \"../core/file-system.service\";\nimport { GlitchComponent } from \"../core/glitch.component\";\nimport { sleeper } from '../core/util';\n\n@Injectable()\nexport class BootProgram extends ProgramBase {\n    log = [\n        `Uncompressing Linux... done, booting the kernel.`,\n        `Booting Linux on physical CPU 0x0`,\n        `Initializing cgroup subsys cpu`,\n        `Initializing cgroup subsys cpuacct`,\n        `Linux version 3.18.10+ (dc4@dc4-XPS13-9333) (gcc version 4.8.3 20140303 (prerelease) (crosstool-NG linaro-1.13.1+bzr2650 - Linaro GCC 2014.03)) #775 PREEMPT Thu Apr 2 18:10:12 BST 2015`,\n        `CPU: ARMv6-compatible processor [410fb767] revision 7 (ARMv7), cr=00c5387d`,\n        `CPU: PIPT / VIPT nonaliasing data cache, VIPT nonaliasing instruction cache`,\n        `Machine model: Raspberry Pi Model B`,\n        `cma: Reserved 8 MiB at 0x0b800000`,\n        `Memory policy: Data cache writeback`,\n        `Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 48768`,\n        `Kernel command line: dma.dmachans=0x7f35 bcm2708_fb.fbwidth=656 bcm2708_fb.fbheight=416 bcm2708.boardrev=0x2 bcm2708.serial=0xb51cb961 smsc95x.macaddr=B8:27:EB:1C:B9:61 bcm2708_fb.fbswap=1 sdhci-bcm2708.emmc_clock_freq=250000000 vc_mem.mem_base=0xec00000 vc_mem.mem_size=0x10000000  dwc_otg.lpm_enabe=0 console=ttyAMA0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline rootwait`,\n        `PID hash table entries: 1024 (order: 0, 4096 bytes)`,\n        `Dentry cache hash table entries: 32768 (order: 5, 131072 bytes)`,\n        `Inode-cache hash table entries: 16384 (order: 4, 65536 bytes)`,\n        `Memory: 177372K/196608K available (5885K kernel code, 348K rwdata, 1868K rodata, 340K init, 733K bss, 19236K reserved)`,\n        `Virtual kernel memory layout:`,\n        `    vector  : 0xffff0000 - 0xffff1000   (   4 kB)`,\n        `    fixmap  : 0xffc00000 - 0xffe00000   (2048 kB)`,\n        `    vmalloc : 0xcc800000 - 0xff000000   ( 808 MB)`,\n        `    lowmem  : 0xc0000000 - 0xcc000000   ( 192 MB)`,\n        `    modules : 0xbf000000 - 0xc0000000   (  16 MB)`,\n        `        .text : 0xc0008000 - 0xc079a78c   (7754 kB)`,\n        `        .init : 0xc079b000 - 0xc07f0000   ( 340 kB)`,\n        `        .data : 0xc07f0000 - 0xc084711c   ( 349 kB)`,\n        `        .bss : 0xc084711c - 0xc08fe848   ( 734 kB)`,\n        `SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1`,\n        `Preemptible hierarchical RCU implementation.`,\n        `NR_IRQS:522`,\n        `sched_clock: 32 bits at 1000kHz, resolution 1000ns, wraps every 2147483648000ns`,\n        `Switching to timer-based delay loop, resolution 1000ns`,\n        `Console: colour dummy device 80x30`,\n        `console [tty1] enabled`,\n        `Calibrating delay loop (skipped), value calculated using timer frequency.. 2.00 BogoMIPS (lpj=10000)`,\n        `pid_max: default: 32768 minimum: 301`,\n        `Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)`,\n        `Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)`,\n        `Initializing cgroup subsys memory`,\n        `Initializing cgroup subsys devices`,\n        `Initializing cgroup subsys freezer`,\n        `Initializing cgroup subsys net_cls`,\n        `Initializing cgroup subsys blkio`,\n        `CPU: Testing write buffer coherency: ok`,\n        `ftrace: allocating 19229 entries in 57 pages`,\n        `Setting up static identity map for 0x553698 - 0x5536d0`,\n        `devtmpfs: initialized`,\n        `VFP support v0.3: implementor 41 architecture 1 part 20 variant b rev 5`,\n        `pinctrl core: initialized pinctrl subsystem`,\n        `NET: Registered protocol family 16`,\n        `DMA: preallocated 4096 KiB pool for atomic coherent allocations`,\n        `bcm2708.uart_clock = 3000000`,\n        `No ATAGs?`,\n        `hw-breakpoint: found 6 breakpoint and 1 watchpoint registers.`,\n        `hw-breakpoint: maximum watchpoint size is 4 bytes.`,\n        `mailbox: Broadcom VideoCore Mailbox driver`,\n        `bcm2708_vcio: mailbox at f200b880`,\n        `bcm_power: Broadcom power driver`,\n        `bcm_power_open() -> 0`,\n        `bcm_power_request(0, 8)`,\n        `bcm_mailbox_read -> 00000080, 0`,\n        `bcm_power_request -> 0`,\n        `Serial: AMBA PL011 UART driver`,\n        `dev:f1: ttyAMA0 at MMIO 0x20201000 (irq = 83, base_baud = 0) is a PL011 rev3`,\n        `console [ttyAMA0] enabled`,\n        `SCSI subsystem initialized`,\n        `usbcore: registered new interface driver usbfs`,\n        `usbcore: registered new interface driver hub`,\n        `usbcore: registered new device driver usb`,\n        `Switched to clocksource stc`,\n        `FS-Cache: Loaded`,\n        `CacheFiles: Loaded`,\n        `NET: Registered protocol family 2`,\n        `TCP established hash table entries: 2048 (order: 1, 8192 bytes)`,\n        `TCP bind hash table entries: 2048 (order: 1, 8192 bytes)`,\n        `TCP: Hash tables configured (established 2048 bind 2048)`,\n        `TCP: reno registered`,\n        `UDP hash table entries: 256 (order: 0, 4096 bytes)`,\n        `UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)`,\n        `NET: Registered protocol family 1`,\n        `RPC: Registered named UNIX socket transport module.`,\n        `RPC: Registered udp transport module.`,\n        `RPC: Registered tcp transport module.`,\n        `RPC: Registered tcp NFSv4.1 backchannel transport module.`,\n        `bcm2708_dma: DMA manager at f2007000`,\n        `vc-mem: phys_addr:0x00000000 mem_base=0x0ec00000 mem_size:0x10000000(256 MiB)`,\n        `futex hash table entries: 256 (order: -1, 3072 bytes)`,\n        `audit: initializing netlink subsys (disabled)`,\n        `audit: type=2000 audit(1.030:1): initialized`,\n        `VFS: Disk quotas dquot_6.5.2`,\n        `Dquot-cache hash table entries: 1024 (order 0, 4096 bytes)`,\n        `FS-Cache: Netfs 'nfs' registered for caching`,\n        `NFS: Registering the id_resolver key type`,\n        `Key type id_resolver registered`,\n        `Key type id_legacy registered`,\n        `msgmni has been set to 362`,\n        `Block layer SCSI generic (bsg) driver version 0.4 loaded (major 252)`,\n        `io scheduler noop registered`,\n        `io scheduler deadline registered (default)`,\n        `io scheduler cfq registered`,\n        `BCM2708FB: allocated DMA memory 4bc00000`,\n        `BCM2708FB: allocated DMA channel 0 @ f2007000`,\n        `Console: switching to colour frame buffer device 82x26`,\n        `bcm2708-dmaengine bcm2708-dmaengine: Load BCM2835 DMA engine driver`,\n        `uart-pl011 dev:f1: no DMA platform data`,\n        `vc-cma: Videocore CMA driver`,\n        `vc-cma: vc_cma_base      = 0x00000000`,\n        `vc-cma: vc_cma_size      = 0x00000000 (0 MiB)`,\n        `vc-cma: vc_cma_initial   = 0x00000000 (0 MiB)`,\n        `brd: module loaded`,\n        `loop: module loaded`,\n        `vchiq: vchiq_init_state: slot_zero = 0xcb800000, is_master = 0`,\n        `Loading iSCSI transport class v2.0-870.`,\n        `usbcore: registered new interface driver smsc95xx`,\n        `dwc_otg: version 3.00a 10-AUG-2012 (platform bus)`,\n        `Core Release: 2.80a`,\n        `Setting default values for core params`,\n        `Finished setting default values for core params`,\n        `Using Buffer DMA mode`,\n        `Periodic Transfer Interrupt Enhancement - disabled`,\n        `Multiprocessor Interrupt Enhancement - disabled`,\n        `OTG VER PARAM: 0, OTG VER FLAG: 0`,\n        `Dedicated Tx FIFOs mode`,\n        `WARN::dwc_otg_hcd_init:1047: FIQ DMA bounce buffers: virt = 0xcbc14000 dma = 0x4bc14000 len=9024`,\n        `FIQ FSM acceleration enabled for :`,\n        `Non-periodic Split Transactions`,\n        `Periodic Split Transactions`,\n        `High-Speed Isochronous Endpoints`,\n        `WARN::hcd_init_fiq:412: FIQ on core 0 at 0xc03fad8c`,\n        `WARN::hcd_init_fiq:413: FIQ ASM at 0xc03fb064 length 36`,\n        `WARN::hcd_init_fiq:438: MPHI regs_base at 0xcc806000`,\n        `dwc_otg bcm2708_usb: DWC OTG Controller`,\n        `dwc_otg bcm2708_usb: new USB bus registered, assigned bus number 1`,\n        `dwc_otg bcm2708_usb: irq 32, io mem 0x00000000`,\n        `Init: Port Power? op_state=1`,\n        `Init: Power Port (0)`,\n        `usb usb1: New USB device found, idVendor=1d6b, idProduct=0002`,\n        `usb usb1: New USB device strings: Mfr=3, Product=2, SerialNumber=1`,\n        `usb usb1: Product: DWC OTG Controller`,\n        `usb usb1: Manufacturer: Linux 3.18.10+ dwc_otg_hcd`,\n        `usb usb1: SerialNumber: bcm2708_usb`,\n        `hub 1-0:1.0: USB hub found`,\n        `hub 1-0:1.0: 1 port detected`,\n        `usbcore: registered new interface driver usb-storage`,\n        `mousedev: PS/2 mouse device common for all mice`,\n        `bcm2835-cpufreq: min=700000 max=700000`,\n        `sdhci: Secure Digital Host Controller Interface driver`,\n        `sdhci: Copyright(c) Pierre Ossman`,\n        `DMA channels allocated for the MMC driver`,\n        `Load BCM2835 MMC driver`,\n        `sdhci-pltfm: SDHCI platform and OF driver helper`,\n        `ledtrig-cpu: registered to indicate activity on CPUs`,\n        `hidraw: raw HID events driver (C) Jiri Kosina`,\n        `usbcore: registered new interface driver usbhid`,\n        `usbhid: USB HID core driver`,\n        `TCP: cubic registered`,\n        `Initializing XFRM netlink socket`,\n        `NET: Registered protocol family 17`,\n        `Key type dns_resolver registered`,\n        `registered taskstats version 1`,\n        `vc-sm: Videocore shared memory driver`,\n        `[vc_sm_connected_init]: start`,\n        `[vc_sm_connected_init]: end - returning 0`,\n        `Waiting for root device /dev/mmcblk0p2...`,\n        `Indeed it is in host mode hprt0 = 00021501`,\n        `mmc0: host does not support reading read-only switch, assuming write-enable`,\n        `mmc0: new high speed SDHC card at address b368`,\n        `mmcblk0: mmc0:b368 SMI   15.0 GiB`,\n        `    mmcblk0: p1 p2`,\n        `EXT4-fs (mmcblk0p2): INFO: recovery required on readonly filesystem`,\n        `EXT4-fs (mmcblk0p2): write access will be enabled during recovery`,\n        `EXT4-fs (mmcblk0p2): recovery complete`,\n        `EXT4-fs (mmcblk0p2): mounted filesystem with ordered data mode. Opts: (null)`,\n        `usb 1-1: new high-speed USB device number 2 using dwc_otg`,\n        `VFS: Mounted root (ext4 filesystem) readonly on device 179:2.`,\n        `Indeed it is in host mode hprt0 = 00001101`,\n        `devtmpfs: mounted`,\n        `Freeing unused kernel memory: 340K (c079b000 - c07f0000)`,\n        `usb 1-1: New USB device found, idVendor=0424, idProduct=9512`,\n        `usb 1-1: New USB device strings: Mfr=0, Product=0, SerialNumber=0`,\n        `hub 1-1:1.0: USB hub found`,\n        `hub 1-1:1.0: 3 ports detected`,\n        `usb 1-1.1: new high-speed USB device number 3 using dwc_otg`,\n        `usb 1-1.1: New USB device found, idVendor=0424, idProduct=ec00`,\n        `usb 1-1.1: New USB device strings: Mfr=0, Product=0, SerialNumber=0`,\n        `smsc95xx v1.0.4`,\n        `smsc95xx 1-1.1:1.0 eth0: register 'smsc95xx' at usb-bcm2708_usb-1.1, smsc95xx USB 2.0 Ethernet, b8:27:eb:1c:b9:61`,\n        `udevd[159]: starting version 175`,\n        `EXT4-fs (mmcblk0p2): re-mounted. Opts: (null)`,\n        `EXT4-fs (mmcblk0p2): re-mounted. Opts: (null)`,\n        `random: nonblocking pool is initialized`,\n        `Driver for 1-wire Dallas network protocol.`,\n        `i2c /dev entries driver`,\n    ];\n\n\n    constructor(private fs: FileSystemService) {\n        super();\n    }\n\n    async main(args: string[]) {\n        this.frame.enableForceScrolling();\n        await this.simulateBoot();\n    }\n\n    async simulateBoot() {\n        this.frame.append(GlitchComponent, c => c.instance.text = 'frataOS');\n        await sleeper(1000);\n        this.frame.clear();\n\n        for (const line of this.log) {\n            this.frame.write(line);\n            const ms = Math.pow(Math.random(), 2) * 25;\n            await sleeper(ms);\n            this.frame.writeLine();\n        }\n\n        this.frame.clear();\n    }\n}","import { Injectable } from \"@angular/core\";\nimport { ProgramBase, Program } from \"./program\";\nimport { FileSystemService } from \"../core/file-system.service\";\n\n@Injectable()\n@Program({\n    alias: 'cd',\n    description: 'Changes to a different directory.'\n})\nexport class ChangeDirectoryProgram extends ProgramBase {\n\n    constructor(private fs: FileSystemService) {\n        super();\n    }\n\n    async main(args: string[]) {\n        try {\n            this.fs.changeDirectory(args[0])\n        } catch (e) {\n            this.frame.writeLine(e);\n        }\n    }\n}","import { Injectable, Injector } from \"@angular/core\";\nimport { ProgramBase, Program, PROGRAMS } from \"./program\";\n\n@Injectable()\n@Program({\n    alias: 'clear', \n    description: 'Clears all output from the screen.'\n})\nexport class ClearProgram extends ProgramBase {\n    async main() {\n        if (this.frame.parent)\n            this.frame.parent.clear();\n    }\n}","import { Injectable, Injector } from \"@angular/core\";\nimport { ProgramBase, Program, PROGRAMS } from \"./program\";\n\n@Injectable()\n@Program({\n    alias: 'count',\n    description: 'Counts to 50.'\n})\nexport class CountProgram extends ProgramBase {\n\n    async main() {\n        let i = 0;\n        while (i < 50) {\n            this.frame.writeLine((++i).toString());\n        }\n    }\n}","import { Injectable } from \"@angular/core\";\nimport { ProgramBase, Program, PROGRAMS } from \"./program\";\nimport { max, padEnd } from \"lodash\";\n\n@Injectable()\n@Program({\n    alias: 'help', \n    description: 'Displays a list of all supported commands.'\n})\nexport class HelpProgram extends ProgramBase {\n\n    async main() {\n        this.frame.writeLine('These are the supported commands: ');\n        this.frame.writeLine();\n\n        const keys = Object.keys(PROGRAMS).sort();\n        const maxLength = max(keys.map(x => x.length));\n\n        keys.forEach(element => {\n            this.frame.writeLine(`${padEnd(element, maxLength, ' ')} | ${PROGRAMS[element].description}`);\n        });\n        this.frame.writeLine();\n    }\n}","import { Injectable, Injector } from \"@angular/core\";\nimport { ProgramBase, Program, PROGRAMS } from \"./program\";\n\n@Injectable()\n@Program({\n    alias: 'hi', \n    description: 'Says hi to the user.'\n})\nexport class HiProgram extends ProgramBase {\n\n    async main() {\n        this.frame.writeLine('Hi you!');\n    }\n}","import { Injectable } from \"@angular/core\";\nimport { ProgramBase, Program } from \"./program\";\nimport { FileSystemService } from \"../core/file-system.service\";\n\n@Injectable()\n@Program({\n    alias: 'ls',\n    description: 'List all directories and files in a directory.'\n})\nexport class ListDirectoryProgram extends ProgramBase {\n\n    constructor(private fs: FileSystemService) {\n        super();\n    }\n\n    async main(args: string[]) {\n\n        for (const item of this.fs.currentDirectory.children)\n            this.frame.write(item.name + '\\t\\t');\n\n        if (this.fs.currentDirectory.children.length)\n            this.frame.writeLine();\n    }\n}","import { Injectable } from \"@angular/core\";\nimport { ProgramBase, Program } from \"./program\";\nimport { LoginService } from \"../core/login.service\";\nimport { Color } from \"../core/color\";\n\n@Injectable()\n@Program({\n    alias: 'login',\n    description: 'Allow a user to login with a username and password.'\n})\nexport class LoginProgram extends ProgramBase {\n\n    constructor(private loginService: LoginService) {\n        super();\n    }\n\n    async main(args: string[]) {\n        let username, password;\n        if (args && args.length >= 2) {\n            username = args[0];\n            password = args[1];\n        } else {\n            this.frame.write('login: ');\n            username = await this.frame.readLine();\n            this.frame.writeLine();\n            this.frame.write('password: ');\n            password = await this.frame.readLine(true); // TODO: mask\n            this.frame.writeLine();\n        }\n\n        try {\n            this.loginService.login(username, password);\n            this.frame.clear();\n            this.frame.writeLine('Welcome back. Type \\'help\\' to see a list of supported commands.');\n        } catch (e) {\n            this.frame.writeLine(e, Color.Red);\n            await this.main([]);\n        }\n    }\n}","import { Injectable } from \"@angular/core\";\nimport { ProgramBase, Program } from \"./program\";\nimport { FileSystemService } from \"../core/file-system.service\";\nimport { Color } from \"../core/color\";\n\n@Injectable()\n@Program({\n    alias: 'mkdir',\n    description: 'Creates a new directory.'\n})\nexport class MakeDirectoryProgram extends ProgramBase {\n\n    constructor(private fs: FileSystemService) {\n        super();\n    }\n\n    async main(args: string[]) {\n        try {\n            this.fs.createDirectory(args[0]);\n        } catch (e) {\n            this.frame.writeLine(e, Color.Red);\n        }\n\n    }\n}","import { FrameComponent } from \"../core/frame.component\";\nimport { Type } from \"@angular/core\";\n\nexport let PROGRAMS: { [alias: string]: { target: string, description: string } } = {};\n\nexport function Program<T>(definition: { alias: string, description: string }): any {\n    return function (target) {\n        PROGRAMS[definition.alias] = { target: target.name, description: definition.description };\n    }\n}\n\nexport function makeProgramProvider<T>(type: Type<T>) {\n    return [type, { provide: type.name, useExisting: type }];\n}\n\nexport abstract class ProgramBase {\n    protected frame: FrameComponent;\n\n    async run(frame: FrameComponent, args: string[]) {\n        this.frame = frame;\n        await this.main(args);\n    }\n\n    abstract async main(args: string[]): Promise<void>;\n}","import { Injectable, Injector } from \"@angular/core\";\nimport { ProgramBase, Program, PROGRAMS } from \"./program\";\nimport { LoginService } from \"../core/login.service\";\nimport { FileSystemService } from \"../core/file-system.service\";\n\n@Injectable()\n@Program({\n    alias: 'shell',\n    description: 'Starts a new shell that can take commands.'\n})\nexport class ShellProgram extends ProgramBase {\n    host = 'terminal';\n    currentUser: { username: string, admin: boolean };\n\n    constructor(private loginService: LoginService, private fs: FileSystemService, private injector: Injector) {\n        super();\n    }\n\n    async main(args: string[]) {\n        const subscription = this.loginService.currentUser.subscribe(x => this.currentUser = x);\n\n        if (args && args.length) {\n            this.printDir();\n            this.frame.write(args[0])\n            this.frame.writeLine();\n            await this.tryRun(args[0]);\n        }\n\n        while (await this.prompt());\n        subscription.unsubscribe();\n    }\n\n    async prompt() {\n        this.printDir();\n        const line = await this.frame.readLine();\n        this.frame.writeLine('');\n\n        await this.tryRun(line);\n\n        \n        return true;\n    }\n\n    printDir() {\n        this.frame.write(`${this.host}:${this.fs.currentDirectory.toPath()} ${this.currentUser.username}$ `);\n    }\n\n    async tryRun(line) {\n        const command = this.parse(line);\n\n        if (command.name === 'exit') {\n            this.frame.writeLine('Bye.');\n            return false;\n        }\n\n        const programDefinition = PROGRAMS[command.name];\n\n        if (programDefinition) {\n            const program: ProgramBase = this.injector.get(programDefinition.target);\n            await program.run(await this.frame.createFrame(), command.args);\n        } else if (command.name) {\n            this.frame.writeLine(`${command.name}: command not found`);\n        }\n\n    }\n\n    parse(line: string) {\n        const tokens = line.split(' ');\n        return { name: tokens[0], args: tokens.slice(1) };\n    }\n}","import { countBy } from \"lodash\";\n\nexport type PlayerSelection = 'x' | 'o';\n\nexport function isSelection(x): x is PlayerSelection {\n    return x === 'x' || x === 'o';\n}\n\nexport type Cursor = { col: number, row: number };\n\nexport class TicTacToeEngine {\n    selection: PlayerSelection\n    grid: (PlayerSelection | null)[][];\n    winner: PlayerSelection | null;\n    turn: PlayerSelection;\n    cursor: Cursor\n    freeSpaces: number;\n\n    constructor(selection: PlayerSelection, spaces: number) {\n        this.selection = selection;\n        this.freeSpaces = spaces * spaces;\n        this.turn = 'x';\n        this.cursor = { col: 0, row: 0 };\n\n        this.grid = [];\n        for (let y = 0; y < spaces; y++) {\n            this.grid.push([]);\n            for (let x = 0; x < spaces; x++) {\n                this.grid[y].push(null);\n            }\n        }\n    }\n\n    get isPlayerTurn() {\n        return this.turn === this.selection;\n    }\n\n    get hasPlayerWon() {\n        return this.winner === this.selection;\n    }\n\n    get completed() {\n        return this.freeSpaces === 0 || this.winner != null;\n    }\n\n    play() {\n        if (this.completed) return;\n\n        this.freeSpaces -= 1;\n        this.grid[this.cursor.row][this.cursor.col] = this.turn;\n        this.turn = this.turn === 'x' ? 'o' : 'x';\n        this.winner = this.findWinner();\n        if (!this.completed) {\n            this.moveRight();\n        }\n    }\n\n    private * selectCols(row) {\n        for (let col = 0; col < this.grid.length; col++)\n            yield { row: row, col: col } as Cursor;\n    }\n\n    private * selectRows(col) {\n        for (let row = 0; row < this.grid.length; row++)\n            yield { row: row, col: col } as Cursor;\n    }\n\n    private * selectDownwardDiagonal() {\n        for (let x = 0; x < this.grid.length; x++)\n            yield { row: x, col: x } as Cursor;\n    }\n\n    private * selectUpwardDiagonal() {\n        for (let x = 0; x < this.grid.length; x++)\n            yield { row: this.grid.length - 1 - x, col: x } as Cursor;\n    }\n\n    private findWinnerInSequence(iterable: IterableIterator<Cursor>) {\n        const selections = Array.from(iterable).map(x => this.grid[x.row][x.col]);\n        const count = countBy(selections, x => x);\n\n        if (count.x && count.x === this.grid.length)\n            return 'x';\n\n        if (count.o && count.o === this.grid.length)\n            return 'o';\n\n        return null;\n    }\n\n    private findWinner() {\n        for (let row = 0; row < this.grid.length; row++) {\n            const winner = this.findWinnerInSequence(this.selectCols(row));\n            if (isSelection(winner)) return winner;\n        }\n\n        for (let col = 0; col < this.grid.length; col++) {\n            const winner = this.findWinnerInSequence(this.selectRows(col));\n            if (isSelection(winner)) return winner;\n        }\n\n        let winner = this.findWinnerInSequence(this.selectUpwardDiagonal());\n        if (isSelection(winner)) return winner;\n        \n        winner = this.findWinnerInSequence(this.selectDownwardDiagonal());\n        if (isSelection(winner)) return winner;\n\n        return null;\n    }\n\n    moveLeft() {\n        this.moveUntilFree(c => {\n            c.col -= 1;\n            if (c.col < 0) {\n                c.col = this.grid[0].length - 1;\n                c.row -= 1;\n                if (c.row < 0) c.row = this.grid.length - 1;\n            }\n        });\n    }\n\n    moveRight() {\n        this.moveUntilFree(c => {\n            c.col += 1;\n            if (c.col >= this.grid[0].length) {\n                c.col = 0;\n                c.row += 1;\n                if (c.row >= this.grid.length) c.row = 0;\n            }\n        });\n    }\n\n    moveUp() {\n        this.moveUntilFree(c => {\n            c.row -= 1;\n            if (c.row < 0) {\n                c.row = this.grid.length - 1;\n                c.col -= 1;\n                if (c.col < 0) c.col = this.grid[0].length - 1;\n            }\n        });\n    }\n\n    moveDown() {\n        this.moveUntilFree(c => {\n            c.row += 1;\n            if (c.row >= this.grid.length) {\n                c.row = 0;\n                c.col += 1;\n                if (c.col >= this.grid[0].length) c.col = 0;\n            }\n        });\n    }\n\n    moveRandomly() {\n        if (this.completed) return;\n\n        let row, col;\n        do {\n            row = Math.floor(Math.random() * this.grid.length);\n            col = Math.floor(Math.random() * this.grid.length);\n        } while (!this.moveTo({ row: row, col: col }) && !this.completed);\n    }\n\n    private moveTo(cursor: Cursor) {\n        if (this.completed) return false;\n\n        if (this.isFree(cursor)) {\n            this.cursor = cursor;\n            return true;\n        }\n\n        return false;\n    }\n\n    private moveUntilFree(fn: ((cursor: Cursor) => void)) {\n        if (this.completed) return;\n\n        do {\n            fn(this.cursor);\n        } while (!this.isFree(this.cursor));\n    }\n\n    private isFree(cursor: Cursor) {\n        return this.grid[cursor.row][cursor.col] === null;\n    }\n}\n","import { Injectable } from \"@angular/core\";\nimport { ProgramBase, Program } from \"../program\";\nimport { Color } from \"../../core/color\";\nimport { FrameComponent } from \"../../core/frame.component\";\nimport { sleeper } from \"../../core/util\";\nimport { TicTacToeEngine, PlayerSelection, isSelection } from './tic-tac-toe.engine';\n\n@Injectable()\n@Program({\n    alias: 'tic-tac-toe',\n    description: 'Tic-tac-toe is a paper-and-pencil game for two players, X and O.'\n})\nexport class TicTacToeProgram extends ProgramBase {\n    gameFrame: FrameComponent;\n    game: TicTacToeEngine;\n\n    async main() {\n        this.frame.writeLine('Welcome to Tic-tac-toe v1.0!');\n        const selection = await this.decideSelection();\n        console.log(selection);\n\n        this.game = new TicTacToeEngine(selection, 3);\n        this.gameFrame = await this.frame.createFrame();\n\n        while (!this.game.completed) {\n            await this.play();\n        }\n\n        this.gameFrame.write('Result: ');\n        if (this.game.winner == null) {\n            this.gameFrame.writeLine('Tie.');\n        } else if (this.game.hasPlayerWon) {\n            this.gameFrame.writeLine('You win!', Color.BrightGreen);\n        } else {\n            this.gameFrame.writeLine('Computer wins!', Color.Cyan);\n        }\n\n    }\n\n    async decideSelection(): Promise<PlayerSelection> {\n        this.frame.write('Please select (X) or (O): ');\n        const selection = (await this.frame.readLine()).toLocaleLowerCase();\n        this.frame.writeLine();\n\n        if (isSelection(selection))\n            return selection;\n\n        this.frame.writeLine('Invalid selection.', Color.Red);\n\n        return await this.decideSelection();\n    }\n\n    async play() {\n        if (this.game.isPlayerTurn)\n            await this.playHuman();\n        else\n            await this.playMachine();\n\n        this.game.play();\n        this.render();\n    }\n\n    async playHuman() {\n        const renderHuman = () => {\n            this.render();\n            this.gameFrame.write('(↑ = W, ← = A, ↓ = S, → = D)', Color.Magenta);\n            this.gameFrame.write(' Make your move: ');\n        };\n\n        renderHuman();\n\n        let key;\n        while (true) {\n            key = await this.gameFrame.readKey();\n            switch (key) {\n                case 'ArrowLeft':\n                case 'a':\n                case 'A':\n                case 'l':\n                case 'L':\n                    this.game.moveLeft();\n                    break;\n                case 'ArrowRight':\n                case 'd':\n                case 'D':\n                case 'r':\n                case 'R':\n                    this.game.moveRight();\n                    break;\n                case 'ArrowUp':\n                case 'w':\n                case 'W':\n                case 'u':\n                case 'U':\n                    this.game.moveUp();\n                    break;\n                case 'ArrowDown':\n                case 'd':\n                case 'D':\n                case 's':\n                case 'S':\n                    this.game.moveDown();\n                    break;\n                case 'Enter':\n                    return;\n                default:\n                    continue;\n            }\n\n            renderHuman();\n        }\n    }\n\n    async playMachine() {\n        this.render();\n        this.gameFrame.write('Computer is thinking...', Color.Yellow);\n\n        this.game.moveRandomly();\n\n        await sleeper(500);\n    }\n\n    render() {\n        this.gameFrame.clear();\n\n        for (let y = 0; y < this.game.grid.length; y++) {\n            const row = this.game.grid[y];\n\n            if (y > 0)\n                this.gameFrame.writeLine(row.map(() => '---').join('|'));\n\n            this.gameFrame.writeLine(row.map((a, x) => {\n\n                if (this.game.cursor.row === y && this.game.cursor.col === x && this.game.isPlayerTurn && !this.game.completed) {\n                    return `[${this.game.turn.toUpperCase()}]`;\n                } else return ` ${a ? a.toUpperCase() : ' '} `;\n            }).join('|'))\n        }\n    }\n}","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { TerminalComponent } from './core/terminal.component';\nimport { LineBreakComponent } from \"./core/line-break.component\";\nimport { TextComponent } from \"./core/text.component\";\nimport { CaretComponent } from \"./core/caret.component\";\nimport { SessionComponent } from './core/session.component';\nimport { ShellProgram } from './programs/shell.program';\nimport { FrameComponent } from './core/frame.component';\nimport { InputComponent } from './core/input.component';\nimport { HiProgram } from './programs/hi.program';\nimport { makeProgramProvider } from './programs/program';\nimport { FrameContentDirective } from './core/frame-content.directive';\nimport { LoginProgram } from './programs/login.program';\nimport { LoginService } from './core/login.service';\nimport { FileSystemService } from './core/file-system.service';\nimport { MakeDirectoryProgram } from './programs/make-directory.program';\nimport { ListDirectoryProgram } from './programs/list-directory.program';\nimport { ChangeDirectoryProgram } from './programs/change-directory.program';\nimport { ClearProgram } from './programs/clear.program';\nimport { BootProgram } from './programs/boot.program';\nimport { GlitchComponent } from './core/glitch.component';\nimport { CountProgram } from './programs/count.program';\nimport { HelpProgram } from './programs/help.program';\nimport { TicTacToeProgram } from './programs/tic-tac-toe/tic-tac-toe.program';\n\nconst programs = [\n  ...makeProgramProvider(BootProgram),\n  ...makeProgramProvider(ChangeDirectoryProgram),\n  ...makeProgramProvider(ClearProgram),\n  ...makeProgramProvider(CountProgram),\n  ...makeProgramProvider(HiProgram),\n  ...makeProgramProvider(ListDirectoryProgram),\n  ...makeProgramProvider(LoginProgram),\n  ...makeProgramProvider(MakeDirectoryProgram),\n  ...makeProgramProvider(ShellProgram),\n  ...makeProgramProvider(HelpProgram),\n  ...makeProgramProvider(TicTacToeProgram),\n]\n\nconst entryComponents = [\n  CaretComponent,\n  TextComponent,\n  LineBreakComponent,\n  FrameComponent,\n  InputComponent,\n  GlitchComponent\n];\n\n@NgModule({\n  declarations: [\n    SessionComponent,\n    TerminalComponent,\n    FrameContentDirective,\n    ...entryComponents\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    RouterModule.forRoot([\n      { path: 'run/:user/:pwd/:program', component: TerminalComponent, pathMatch: 'full' },\n      { path: '**', component: TerminalComponent, pathMatch: 'full' },\n    ])\n  ],\n  providers: [...programs, LoginService, FileSystemService],\n  bootstrap: [SessionComponent],\n  entryComponents: entryComponents\n})\nexport class TerminalModule {\n\n}\n"],"sourceRoot":""}